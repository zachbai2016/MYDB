MYDB
	MYDB作为个人练习，是我2021年前后手搓的一个简易版KV数据库。
	其中
	
	MYDB 对象中包含了两个线程：
		1. 读线程
			启动时 用于 恢复磁盘数据
		2. 写线程
			启动后 用于 追加写入内存的数据到 磁盘文件
	
	主线程不断接受用户输入：
		1. 每个用户的输入 都会转换成一个 operation
			operation 支持的操作类型有：
				SELECT	
					select 
						不带参数
							默认是全表查询
						除非携带 k 
							如 select k 
							返回 v
						暂未支持多key查询
				INSERT
					这里写内存的时候同时会想办法持久化：
						数据写内存(map)的同时，记录到了 阻塞队列，目的是为了 持久化使用；
							持久化的时候使用了双缓冲阻塞队列 - 目的就是提高性能；
							其实5个操作对于刷盘来说太敏捷了，根本用不到双缓冲；
							但是如果1s有50K个写操作，对单机来说，那就是灾难；
							因此，这里配置了 两种策略：
								基于操作次数间隔的刷新 和 基于时间间隔的刷新；
							频繁的刷盘，会影响整个系统的性能，因此这里使用了 5s 或 5个操作的策略来决定刷盘
								这里其实使用配置文件，由用户决定 多少操作 或 多少秒 刷一次盘，
									毕竟， 用户应该了解自己的系统运行的情况：
										比如每秒的 读写请求情况，以及存储对象的大小的情况；
					当然、这份代码中 insert 这里也有bug：
					
						那就是 写内存 和 持久化用的同一个线程：
							这个问题不言而喻， 当 flush 磁盘时间稍微过长， 如 超过 2s 3s 用户就会感知到 系统卡顿；
						还有一个缺点就是：
							这里没有加入 客户端的terminal中 对信号处理的支持；
								如果客户端执行了3个写操作，且不大于5s， 关掉服务程序， 也容易造成 没有 flush 磁盘的危险行为；
								当然，这里是通过 terminal 直接来操作 mydb(作为服务端)；
								如果通过RPC在客户端来调用服务端提供的服务，
									那在客户端时间自身设计的时候、以及在考虑和服务端交互的时候，要考虑的问题更多。
									这里的代码的灵感就是来自于 HDFS 和 HBASE， 关于RPC的实现细节，我们可以更多的参考 HDFS 。
										比如当一个客户端把文件上传或下载的时候， put 或 get 时，基于RPC调用的细节，就是我们要模仿的。
					继续数落bug：
						insert 作为顺序记录 当然没有问题
						但是，当执行 delete 或 update 的时候， 可能操作 的是 sync=3 或 sync=6 次的操作的值， 这样，直接通过 writer线程
						把 buffer 中的数据 flush 到 磁盘， 是不能删除掉 文件中的数据的，
						
						因此，仿照 hdfs 中 editlog 的形式， 应该记录日志，根据策略、过一段时间，根据日志 来 操作 持久化的文件，
						这样才能保证 磁盘中的文件 和 内存中的文件一致。
						写内存之前 先记录  editlog ， 每次启动的时候， 将 editlog 和 磁盘数据文件 合并， 这样就会生成正确的 内存文件。
						
						所以，这里因为缺乏 editlog 从而不能保证 每次从 磁盘数据文件 中加载到内存的数据 和 之前内存中的数据是一致的。
						
						新手可能会想，你把之前内存的数据 重新 flush 一次不就行了吗？ 
							是啊， 但是 你想过没有？ 内存中的数据， 是会被及时清空的，
								我的意思是， 队列中的数据是会被及时清空的，
									kv 是全量内存数据
										buffer 有两份，用来写磁盘用
										但是如果 每次把kv 中的数据 全量 flush 到内存， 那如果 kv 中有 很多很多的数据， flush 的时候， 
										也会影响性能， 因此 这里 flush 是力求 短而快， 把数据一致的问题， 交给每次启动。
										只要不宕机，内存的数据就是最完整的，
										宕机也没事，加载合并一次，内存中也就是完整的数据了。
				UPDATE
				DELETE
				
				支持空操作 返回为空 不会记录空操作的时间
				
				每个operation 都包含了 当前时间 和 MYDB启动后的 第几次操作
					记录上一次操作  是为了满足 超过5秒 或者5个操作之后 进行刷盘 为了方便刷盘
					先更新了上一次的操作
				
			operation 中包含了 两个属性：
				a. sync 记录的操作数
				b. mills 当前 operation 的毫秒时间
	
	其中包含了一些特性：
		1. 程序启动之后，会优先加载磁盘中的数据文件，进行反序列化，以进行之前记录的KV数据恢复。
			使用 CountDownLatch 来控制恢复线程优先执行。
			使用 
		2. 写入内存的数据，会优先写入EDITLOG中。
			
			
		